# Video Device Plugin Environment Configuration
# Copy this file to .env and modify the values as needed

# =============================================================================
# REQUIRED ENVIRONMENT VARIABLES
# =============================================================================

# Kubernetes node name where the device plugin is running
# This is used for device plugin registration with kubelet
# Format: string (e.g., "worker-node-1", "ip-10-0-1-5")
NODE_NAME=worker-node-1

# =============================================================================
# OPTIONAL ENVIRONMENT VARIABLES
# =============================================================================

# Maximum number of video devices to create per node
# Range: 1-8 (default: 8)
# Used by: V4L2Manager to determine how many /dev/videoX devices to create
# Note: Each device can be allocated to one pod at a time
MAX_DEVICES=8

# Path to the kubelet device plugin socket
# Default: "/var/lib/kubelet/device-plugins/kubelet.sock"
# Used by: Device plugin for registration with kubelet
# Note: This is the standard kubelet socket path in most Kubernetes distributions
KUBELET_SOCKET=/var/lib/kubelet/device-plugins/kubelet.sock

# Resource name for the device plugin
# Default: "meeting-baas.io/video-devices"
# Used by: Kubernetes to identify this device plugin resource
# Note: Pods will request this resource name in their resource specifications
RESOURCE_NAME=meeting-baas.io/video-devices

# Path where the device plugin socket will be created
# Default: "/var/lib/kubelet/device-plugins/video-device-plugin.sock"
# Used by: Device plugin gRPC server for communication with kubelet
# Note: Must be in a directory that the container can write to
SOCKET_PATH=/var/lib/kubelet/device-plugins/video-device-plugin.sock

# Log level for structured logging
# Options: "debug", "info", "warn", "error" (default: "info")
# Used by: Application logging system
# Note: "debug" provides detailed device operations, "error" only shows critical issues
LOG_LEVEL=info

# =============================================================================
# DEVELOPMENT/DEBUGGING VARIABLES
# =============================================================================

# Enable debug mode for additional logging and validation
# Options: "true", "false" (default: "false")
# Used by: Development and debugging
# Note: Enables additional validation and detailed error messages
DEBUG=false

# =============================================================================
# V4L2LOOPBACK CONFIGURATION
# =============================================================================

# Number of buffers for v4l2loopback module
# Default: "2"
# Used by: modprobe command when loading v4l2loopback
# Note: Higher values may improve performance but use more memory
V4L2_MAX_BUFFERS=2

# Enable exclusive capabilities for v4l2loopback
# Options: "1", "0" (default: "1")
# Used by: modprobe command when loading v4l2loopback
# Note: 1 enables exclusive access, 0 allows multiple applications
V4L2_EXCLUSIVE_CAPS=1

# Card label for v4l2loopback devices
# Default: "MeetingBot_WebCam"
# Used by: modprobe command when loading v4l2loopback
# Note: This label will appear in video device listings
V4L2_CARD_LABEL=MeetingBot_WebCam

# =============================================================================
# KUBERNETES INTEGRATION
# =============================================================================

# Namespace where the device plugin will be deployed
# Default: "kube-system"
# Used by: Kubernetes manifests and RBAC configuration
# Note: Must match the namespace in your DaemonSet deployment
KUBERNETES_NAMESPACE=kube-system

# Service account name for the device plugin
# Default: "video-device-plugin"
# Used by: Kubernetes RBAC configuration
# Note: Must match the ServiceAccount name in your manifests
SERVICE_ACCOUNT_NAME=video-device-plugin

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Enable Prometheus metrics endpoint
# Options: "true", "false" (default: "false")
# Used by: Metrics collection and monitoring
# Note: When enabled, exposes metrics on /metrics endpoint
ENABLE_METRICS=false

# Metrics port for Prometheus scraping
# Default: "8080"
# Used by: Prometheus metrics endpoint
# Note: Must be available and not conflict with other services
METRICS_PORT=8080

# Health check interval in seconds
# Default: "30"
# Used by: Device health monitoring
# Note: How often to check if devices are still healthy
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Device allocation timeout in seconds
# Default: "30"
# Used by: Device allocation process
# Note: Maximum time to wait for device allocation
ALLOCATION_TIMEOUT=30

# Device creation timeout in seconds
# Default: "60"
# Used by: Initial device creation process
# Note: Maximum time to wait for all devices to be created
DEVICE_CREATION_TIMEOUT=60

# Graceful shutdown timeout in seconds
# Default: "10"
# Used by: Application shutdown process
# Note: Maximum time to wait for graceful shutdown
SHUTDOWN_TIMEOUT=10

# =============================================================================
# DOCKER REGISTRY CONFIGURATION
# =============================================================================

# Docker registry URL (e.g., ghcr.io, docker.io, your-registry.com)
# Default: "ghcr.io"
# Used by: Docker build and push operations
# Note: Leave empty for Docker Hub (docker.io)
DOCKER_REGISTRY=ghcr.io

# Docker username for registry authentication
# Default: ""
# Used by: Docker login and push operations
# Note: Required for pushing images to private registries
DOCKER_USERNAME=

# Docker password or token for registry authentication
# Default: ""
# Used by: Docker login and push operations
# Note: Use personal access token for GitHub Container Registry
DOCKER_PASSWORD=

# =============================================================================
# EXAMPLE USAGE
# =============================================================================

# For production deployment:
# NODE_NAME=worker-node-1
# MAX_DEVICES=8
# LOG_LEVEL=info
# ENABLE_METRICS=true

# For development/testing:
# NODE_NAME=test-node
# MAX_DEVICES=4
# LOG_LEVEL=debug
# DEBUG=true

# For debugging device issues:
# NODE_NAME=debug-node
# MAX_DEVICES=8
# LOG_LEVEL=debug
# DEBUG=true
# V4L2_CARD_LABEL=Debug_WebCam

# For build environment:
# DOCKER_REGISTRY=rg.fr-par.scw.cloud/baas-bots-preprod
# DOCKER_USERNAME=test
# DOCKER_PASSWORD=test
